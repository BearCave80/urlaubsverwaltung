<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

    <changeSet author="murygina" id="add_column_sick_note_id_to_sick_note_comment_table">

        <preConditions>
            <tableExists tableName="SickNoteComment"/>
        </preConditions>

        <addColumn tableName="SickNoteComment">
            <column name="sickNote_id" type="INT(10)"/>
        </addColumn>

        <sql>
            UPDATE SickNoteComment AS comment
            INNER JOIN SickNote_SickNoteComment mapping ON comment.id = mapping.comments_id
            SET comment.sickNote_id = mapping.SickNote_id;
        </sql>

    </changeSet>

    <changeSet author="murygina" id="remove_sick_note_comment_mapping_table">

        <preConditions>
            <tableExists tableName="SickNote_SickNoteComment"/>
        </preConditions>

        <dropTable tableName="SickNote_SickNoteComment"/>

    </changeSet>

</databaseChangeLog>