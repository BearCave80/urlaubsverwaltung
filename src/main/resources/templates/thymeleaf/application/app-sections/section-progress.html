<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <title></title>
  </head>
  <body>
    <th:block th:fragment="section">
      <div th:if="${not #lists.isEmpty(comments)}">
        <div th:replace="fragments/section-heading::section-heading(~{::app-progress-heading-body}, ~{})">
          <th:block th:ref="app-progress-heading-body">
            <h2 id="vacation" th:text="#{application.progress.title}">Verlauf</h2>
          </th:block>
        </div>

        <table class="list-table striped-table bordered-table tw-text-sm">
          <tbody>
            <tr th:each="comment : ${comments}">
              <td class="print:tw-hidden tw-text-blue-50 dark:tw-text-sky-800">
                <img
                  th:replace="fragments/avatar::avatar-bordered(url=${comment.person.gravatarURL + '?d=404&s=40'},niceName=${comment.person.niceName},width='40px',height='40px')"
                  alt=""
                />
              </td>
              <td th:text="${comment.person.niceName}"></td>
              <td>
                <p class="tw-m-0 tw-mb-1">
                  <th:block th:text="#{'application.progress.' + ${comment.action}}"></th:block>
                  <th:block
                    th:if="${comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).APPLIED}"
                  >
                    <th:block th:replace="fragments/date::date(${app.applicationDate})"></th:block>
                  </th:block>
                  <th:block
                    th:if="${comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).ALLOWED || comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).EDITED || comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).TEMPORARY_ALLOWED || comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).REJECTED || comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).CONVERTED}"
                  >
                    <th:block th:replace="fragments/date::date(${app.editedDate})"></th:block>
                  </th:block>
                  <th:block
                    th:if="${comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).ALLOWED_DIRECTLY}"
                  >
                    <th:block th:replace="fragments/date::date(${app.applicationDate})"></th:block>
                  </th:block>
                  <th:block
                    th:if="${comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).CANCELLED || comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).CANCELLED_DIRECTLY || comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).REVOKED}"
                  >
                    <th:block th:replace="fragments/date::date(${app.cancelDate})"></th:block>
                  </th:block>
                  <th:block
                    th:if="${comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).REFERRED || comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).CANCEL_REQUESTED || comment.action == T(org.synyx.urlaubsverwaltung.application.comment.ApplicationCommentAction).CANCEL_REQUESTED_DECLINED}"
                  >
                    <th:block th:replace="fragments/date::date(${comment.date})"></th:block>
                  </th:block>
                  <th:block
                    th:if="${not #strings.isEmpty(comment.text)}"
                    th:text="#{application.progress.comment}"
                  ></th:block>
                </p>
                <p th:if="${not #strings.isEmpty(comment.text)}" th:text="${comment.text}" class="tw-m-0 tw-italic"></p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </th:block>
  </body>
</html>
